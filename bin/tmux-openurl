#!/bin/sh

NUM_FROM_LAST=$1
URL=$(tmux capture-pane \; show-buffer -b0 \; delete-buffer -b0 |
           grep -P -o '(?:https?://|ftp://|news://|mailto:|file://|\bwww\.)[a-zA-Z0-9\-\@;\/?:&=%\$_.+!*\x27,~#]*(\([a-zA-Z0-9\-\@;\/?:&=%\$_.+!*\x27,~#]*\)|[a-zA-Z0-9\-\@;\/?:&=%\$_+*~])+' |
           tail -n $NUM_FROM_LAST | head -n 1)
[ -n "$URL" ] && xdg-open "$URL"

